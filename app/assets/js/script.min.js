var adriftApp=angular.module("adriftApp",["ngRoute","userControllers","topicControllers"]);adriftApp.config(["$routeProvider","$locationProvider",function($routeProvider,$locationProvider){$locationProvider.html5Mode({enabled:true});$routeProvider.when("/adrift/locations",{templateUrl:"partials/topics/index.html",controller:"TopicIndexCtrl"}).when("/adrift/settings/:userId",{templateUrl:"partials/users/settings.html",controller:"UserShowCtrl"}).when("/adrift/collection/:userId",{templateUrl:"partials/users/collection.html",controller:"UserShowCtrl"}).when("/adrift/locations/:topicId",{templateUrl:"partials/topics/show.html",controller:"TopicShowCtrl"}).otherwise({redirectTo:"/adrift/locations"})}]);// User Controller
var userControllers=angular.module("userControllers",[]);userControllers.controller("UserIndexCtrl",["$scope","$http",function($scope,$http){$http.get("users/").success(function(data){console.log(data)})}]);userControllers.controller("UserShowCtrl",["$scope","$http","$routeParams",function($scope,$http,$routeParams){$http.get("users/"+$routeParams.userId).success(function(data){console.log(data)})}]);
// Topics Controller
var topicControllers=angular.module("topicControllers",[]);topicControllers.controller("TopicIndexCtrl",["$scope","$http",function($scope,$http){$http.get("topics/").success(function(data){$scope.topics=data.topics})}]);topicControllers.controller("TopicShowCtrl",["$scope","$http","$routeParams",function($scope,$http,$routeParams){$http.get("topics/"+$routeParams.topicId).success(function(data){$scope.topic=data.topic})}]);topicControllers.controller("TopicMessageController",["$scope","$http","$routeParams",function($scope,$http,$routeParams){$scope.message={_topic:$routeParams.topicId};$scope.addMessage=function(message){$scope.messageCopy=angular.copy($scope.message);$http.post("messages/",{message:$scope.messageCopy}).success(function(data,status){$scope.status=status;$scope.data=data;$scope.result=data});$scope.message.content=""}}]);